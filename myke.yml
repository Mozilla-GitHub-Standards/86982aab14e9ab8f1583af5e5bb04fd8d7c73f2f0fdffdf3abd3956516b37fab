project: dino-park-profile-publisher
desc: Broker betweeen DinoPark and CIS.
env:
  name: dino-park-profile-publisher
  image: mozillaparsys/dino-park-profile-publisher
tasks:
  package:
    cmd: docker build -t {{ .image }} .
  
  run-docker:
    cmd: docker run --rm -ti --name {{ .name }} {{ .image }}

  run-k8s:
    cmd: kubectl apply -f k8s/chart/

  run-local:
    cmd: npm run dev
  
  test:
    cmd: npm run test
  
  test-all:
    cmd: $myke setup _lint test _coverage

  _lint:
    cmd: npm run pretest
  
  _coverage:
    cmd: npm run coverage
  
  setup:
    cmd: npm install 